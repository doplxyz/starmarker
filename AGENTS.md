## Note
This metadata is written in Japanese. Translate it into English and use it.

##注意
AGENTS.md の内容はあくまで参考としてのみ使用し、いかなる形でも書き換えてはならない。
このメタデータは日本語で書かれている。英語→日本語などの翻訳化は絶対に許可しない。それは捏造と改変であり重大なインシデントである。
繰り返す、AGENTS.md の内容はあくまで参考としてのみ使用し、いかなる形でも書き換えてはならない。

## 0. 設計思想：このスクリプトは何を目的としているか？

[1] 位置情報ゲーム Ingress 用の IITC 上で動作する外部プラグインである。
[2] ログを出力しないユーザーがどこで活動しているかを調査するために開発された。
[3] 検出にあたっては、日常利用で何気なく IITC を閲覧している際に、対象ユーザーがその場所を訪れたことに気づけるよう、運用負荷を軽減した。
[4] ポータルをタップした際に、日付、GUID、ポータル名、Resonators および MODs に含まれるユーザー一覧を抽出し、ローカルストレージにログとして保存する。
監視対象ユーザーの名前が見つかった場合、星印とリングを付与する。
[5] ポータルに星印およびリングを付与する場合でも、ユーザーのタップ操作を妨げてはならない。星印およびリングの描画レイヤーはタップ対象の背後に存在しなければならない。
[6] 複数の監視対象ユーザーの管理を可能にする。優先順位は USER1、USER2、USER3、USER4、USER5 とし、星印およびリングの重複表示は発生してはならない。
[7] リロード時に星印およびリングの両方をクリアできるようにし、その有効・無効は ON/OFF チェックボックスで制御する。
[8] エクスポート／インポート時に重複データを整理する機能を設け、その有効・無効は ON/OFF チェックボックスで制御する。これは JSON エクスポートおよび JSON インポートボタンの近くに配置する。
取得データ一覧には、日付、GUID、ポータル名、ユーザー名を保持する。ただし、GUID が同一であってもユーザー名に変化がない場合は、古いデータを破棄する。
[9] 重複データ整理のための任意実行ボタンを用意する。
[10] 取得データを表示するためのボタンが必要である。
[11] 現在取得しているすべてのデータを削除するためのボタンが必要である。
[12] ユーザーから新たな指示がない限り、設計思想から逸脱する編集を行ってはならない。
[13] デフォルトの保存期間は 1 日とする。最大値は 30 日とする。
[14] デフォルトの星のサイズは小さくする。
[15] 主要コードの塊は 00000 , 00010 , 00020 , のように管理が必要だ。差分パッチにより新規ブロックが必要な場合は 00011のように小刻みに変更を入れる
以下は記載の一例である。存在しない場合は本スクリプト向けに行の挿入が必要である。
// --- Function 00000 Initialize Variables
// --- Function 00010 Load Settings
// --- Function 00020 Save Settings
// --- Function 00030 Load Data

## 1. メタデータおよび識別情報（厳守）
以下の行は決して変更してはならない。ただし、これらの行の間にある内容は変更してもよい。例えば、バージョン情報など。
// @author         DOPPELGENGER,GEMINI3PRO,JULES
// @id             iitc-plugin-star-marker
// @name           IITC plugin: Star Marker
// @category       d.org.addon
// @namespace      https://example.com/
// @include        https://intel.ingress.com/*
// @include        https://intel-x.ingress.com/*
// @grant          none

## 2. 更新プロセス
大幅な機能改善が必要な場合を除き、修正は最小限にとどめる。各関数へのパッチ適用を最優先とする。

## 3. プル時の挙動
各バージョンごとに、StarMarker.1.0.1.user.js のようなファイルを生成すること。これはユーザーのバージョン管理のためである。
メインの作業ストリームとして、StarMarker.user.js ファイルを上書きし、コーディングの差分が確認できるようにする。
つまり、各プルで同一内容のファイルを 2 つ生成する。

## .4 スクリプトは常に Android 向けにコーディングし、PC でのみ使用可能なコードは決して使用しないこと。
